<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Boss Health</title>
    <style>
        body { background-color: #1a1a1a; color: white; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .boss-container { width: 80%; text-align: center; }
        h1 { font-size: 3em; margin-bottom: 20px; text-transform: uppercase; }
        .hp-bar-background { width: 100%; background-color: #444; border-radius: 20px; border: 3px solid #000; padding: 5px; box-shadow: 0 0 15px rgba(0,0,0,0.5); }
        .hp-bar-foreground { height: 50px; background-color: #d90429; border-radius: 15px; width: 100%; transition: width 1.5s ease-out; }
        .hp-text { font-size: 1.8em; font-weight: bold; margin-top: 10px; }

        .grid-container {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Creates flexible columns */
          gap: 20px;
        }
        /* No specific media query needed for basic responsiveness with auto-fit */
    </style>
</head>
<body>
    <div class="boss-container">
        <h1>FINAL BOSS</h1>
        <div class="hp-bar-background">
            <div class="hp-bar-foreground" id="healthBar"></div>
        </div>
        <p class="hp-text" id="healthText">Loading...</p>
    </div>

    <!-- <div class="grid-container">
      <div class="grid-item">Item 1</div>
      <div class="grid-item">Item 2</div>
      <div class="grid-item">Item 3</div>
    </div> -->

    <script>
        // IMPORTANT: Paste your Google Apps Script Web App URL here!
        const SCRIPT_URL = "YOUR_GOOGLE_APPS_SCRIPT_URL_HERE";

        const healthBar = document.getElementById('healthBar');
        const healthText = document.getElementById('healthText');

        async function updateHealth() {
            try {
                const response = await fetch(SCRIPT_URL);
                if (!response.ok) throw new Error('Network response was not ok.');

                const data = await response.json();

                const currentHP = data.currentHP > 0 ? data.currentHP : 0; // Prevent negative HP
                const maxHP = data.maxHP;
                const healthPercentage = (currentHP / maxHP) * 100;

                // Update the visual bar width
                healthBar.style.width = healthPercentage + '%';

                // Update the text display
                healthText.innerText = `${currentHP.toLocaleString()} / ${maxHP.toLocaleString()} HP`;

            } catch (error) {
                console.error('Failed to fetch health data:', error);
                healthText.innerText = "Error fetching data.";
            }
        }

        // Fetch data immediately on page load, then update every 15 seconds
        updateHealth();
        setInterval(updateHealth, 15000); // 15000ms = 15 seconds
    </script>
</body>
</html>